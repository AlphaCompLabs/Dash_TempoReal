<!--
 # =====================================================================================
 # SERVIDOR FRONTEND - DASHBOARD DE ANÁLISE DE TRÁFEGO
 # Versão: 3.0.0 (Padronização do Código)
 # Autor(es): Equipe UX/UI - Elisa Nunes
 # Data: 2025-09-29
 # Descrição: Componente da barra lateral que exibe informações gerais ou
 #            detalhadas de um cliente específico.
 # =====================================================================================
-->

<!-- Início do Componente da Barra Lateral -->
<aside class="sidebar-component text-white p-6 rounded-lg flex flex-col justify-center items-center gap-6" [ngStyle]="sidebarStyleObject" [ngClass]="{'drilldown-active': isDrillDownMode}">

  <!-- Título da Barra Lateral (Dinâmico) -->
  <div class="sidebar-tittle text-center">
    @if (isDrillDownMode) {
    <h2 class="font-sans font-light text-xl text-white">Informações do</h2>
    <h1 class="font-saved text-2xl text-accent-light leading-none">CLIENTE</h1>
    } @else {
    <h2 class="font-sans font-light text-xl text-white">Informações</h2>
    <h1 class="font-saved text-3xl text-accent-light leading-none">GERAIS</h1>
    <h2 class="font-sans font-light text-xl text-white">das redes</h2>
    }
  </div>

  <!-- Seção de Gráficos Circulares (Estatísticas) -->
  <div class="sidebar-stats-circle flex flex-col items-center gap-4">

    <!-- Gráfico Circular: Download -->
    <div class="relative w-40 h-40">
      <svg class="absolute inset-0 -rotate-90" viewBox="0 0 120 120">
        <defs>
          <linearGradient id="downloadGradient" x1="0%" y1="100%" x2="0%" y2="0%">
            <stop offset="0%" [style.stop-color]="'var(--grad-download-1)'" stop-opacity="0.9" />
            <stop offset="100%" [style.stop-color]="'var(--grad-download-2)'" stop-opacity="0.9" />
          </linearGradient>
        </defs>
        <circle class="text-gray-700" stroke-width="10" stroke="currentColor" fill="transparent" r="54" cx="60" cy="60" />
        <circle stroke-width="10" stroke="url(#downloadGradient)" fill="transparent" r="54" cx="60" cy="60" [attr.stroke-dasharray]="circumference" [attr.stroke-dashoffset]="downloadStrokeOffset" />
      </svg>
      <div class="relative z-10 w-full h-full flex flex-col items-center justify-center">
        <span class="font-sans text-secondary text-sm">DOWNLOAD</span>
        <span class="font-sans font-bold text-white" [style.font-size.px]="downloadFontSize">{{ totalDownload }}</span>
        <span class="progress-percentage progress-percentage-download font-sans text-xs font-bold">{{ downloadProgress.toFixed(0) }}%</span>
      </div>
    </div>

    <!-- Gráfico Circular: Upload -->
    <div class="relative w-40 h-40">
      <svg class="absolute inset-0 -rotate-90" viewBox="0 0 120 120">
        <defs>
          <linearGradient id="uploadGradient" x1="0%" y1="100%" x2="0%" y2="0%">
            <stop offset="0%" [style.stop-color]="'var(--grad-upload-1)'" stop-opacity="0.9" />
            <stop offset="100%" [style.stop-color]="'var(--grad-upload-2)'" stop-opacity="0.9" />
          </linearGradient>
        </defs>
        <circle class="text-gray-700" stroke-width="10" stroke="currentColor" fill="transparent" r="54" cx="60" cy="60" />
        <circle stroke-width="10" stroke="url(#uploadGradient)" fill="transparent" r="54" cx="60" cy="60" [attr.stroke-dasharray]="circumference" [attr.stroke-dashoffset]="uploadStrokeOffset" />
      </svg>
      <div class="relative z-10 w-full h-full flex flex-col items-center justify-center">
        <span class="font-sans text-secondary text-sm">UPLOAD</span>
        <span class="font-sans font-bold text-white" [style.font-size.px]="uploadFontSize">{{ totalUpload }}</span>
        <span class="progress-percentage progress-percentage-upload font-sans text-xs font-bold">{{ uploadProgress.toFixed(0) }}%</span> </div>
    </div>

  </div>

  <!-- Caixa de Informações Adicionais (Dinâmica) -->
  <div class="sidebar-info-box flex flex-col gap-2">
    @if (!isDrillDownMode) {
    <div class="info-box bg-dark py-3 px-4 rounded-md">
      <h3 class="font-sans text-xs text-accent-light">Clientes (IPs) Conectados:</h3>
      <p class="font-sans text-lg font-bold text-white">{{ activeClients }} CLIENTES (IPs)</p>
    </div>
    <div class="info-box bg-dark py-3 px-4 rounded-md">
      <h3 class="font-sans text-xs text-accent-light">Top Talker:</h3>
      <p class="font-sans text-lg font-bold text-white">{{ topTalker }}</p>
    </div>
    }

    @if (isDrillDownMode) {
    <div class="info-box bg-dark py-3 px-4 rounded-md">
      <h2 class="font-sans text-xs text-accent-light">Top Protocol:</h2>
      <p class="font-sans text-light text-lg font-bold text-white">{{ topProtocol }}</p>
    </div>
    }
  </div>

</aside>
<!-- Fim do Componente da Barra Lateral -->